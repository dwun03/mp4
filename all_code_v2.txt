

=========================================
FILE: ./all_code.txt
=========================================



=========================================
FILE: ./all_codeNEW.txt
=========================================



=========================================
FILE: ./all_code_v2.txt
=========================================



=========================================
FILE: ./MP4_MovieTicketBooking/build.xml
=========================================

<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See commented blocks below for -->
<!-- some examples of how to customize the build. -->
<!-- (If you delete it and reopen the project it will be recreated.) -->
<!-- By default, only the Clean and Build commands use this build script. -->
<!-- Commands such as Run, Debug, and Test only use this build script if -->
<!-- the Compile on Save feature is turned off for the project. -->
<!-- You can turn off the Compile on Save (or Deploy on Save) setting -->
<!-- in the project's Project Properties dialog box.-->
<project name="MP4_MovieTicketBooking" default="default" basedir=".">
    <description>Builds, tests, and runs the project MP4_MovieTicketBooking.</description>
    <import file="nbproject/build-impl.xml"/>
    <!--

    There exist several targets which are by default empty and which can be 
    used for execution of your tasks. These targets are usually executed 
    before and after some main targets. They are: 

      -pre-init:                 called before initialization of project properties 
      -post-init:                called after initialization of project properties 
      -pre-compile:              called before javac compilation 
      -post-compile:             called after javac compilation 
      -pre-compile-single:       called before javac compilation of single file
      -post-compile-single:      called after javac compilation of single file
      -pre-compile-test:         called before javac compilation of JUnit tests
      -post-compile-test:        called after javac compilation of JUnit tests
      -pre-compile-test-single:  called before javac compilation of single JUnit test
      -post-compile-test-single: called after javac compilation of single JUunit test
      -pre-dist:                 called before archive building 
      -post-dist:                called after archive building 
      -post-clean:               called after cleaning build products 
      -pre-run-deploy:           called before deploying
      -post-run-deploy:          called after deploying

    Example of pluging an obfuscator after the compilation could look like 

        <target name="-post-compile">
            <obfuscate>
                <fileset dir="${build.classes.dir}"/>
            </obfuscate>
        </target>

    For list of available properties check the imported 
    nbproject/build-impl.xml file. 


    Other way how to customize the build is by overriding existing main targets.
    The target of interest are: 

      init-macrodef-javac:    defines macro for javac compilation
      init-macrodef-junit:   defines macro for junit execution
      init-macrodef-debug:    defines macro for class debugging
      do-dist:                archive building
      run:                    execution of project 
      javadoc-build:          javadoc generation 

    Example of overriding the target for project execution could look like 

        <target name="run" depends="<PROJNAME>-impl.jar">
            <exec dir="bin" executable="launcher.exe">
                <arg file="${dist.jar}"/>
            </exec>
        </target>

    Notice that overridden target depends on jar target and not only on 
    compile target as regular run target does. Again, for list of available 
    properties which you can use check the target you are overriding in 
    nbproject/build-impl.xml file. 

    -->
</project>


=========================================
FILE: ./MP4_MovieTicketBooking/src/java/controllers/HomeServlet.java
=========================================


package controllers;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 *
 * @author Saintan
 */
public class HomeServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        //send user to welcome page 
        request.getRequestDispatcher("/WEB-INF/home.jsp").forward(request, response);
    }
}



=========================================
FILE: ./MP4_MovieTicketBooking/src/java/controllers/LoginServlet.java
=========================================

package controllers;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import objects.User;

public class LoginServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {  
        HttpSession session = request.getSession(false);
        if(session != null){
            session.invalidate();
        }
        request.getRequestDispatcher("/WEB-INF/login.jsp").forward(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String inputUsername = request.getParameter("username");
        String inputPassword = request.getParameter("password");
        
        String txtFilePath = getServletContext().getRealPath("/WEB-INF/users.txt");
        User foundUser = null;

        if (txtFilePath != null) {
            try (BufferedReader reader = new BufferedReader(new FileReader(txtFilePath))) {
                String line;
                while ((line = reader.readLine()) != null) {
                    String[] parts = line.split(",");
                    
                    // RUBRIC FIX: Check for 7 parts (including Role)
                    if (parts.length >= 7) {
                        String fileUsername = parts[0].trim();
                        String filePassword = parts[1].trim();
                        
                        if (fileUsername.equals(inputUsername) && filePassword.equals(inputPassword)) {
                            // Extract all data
                            String fileName = parts[2].trim();
                            String fileAge = parts[3].trim();
                            String fileContact = parts[4].trim();
                            String fileAddress = parts[5].trim();
                            String fileRole = parts[6].trim();

                            // Create the User object
                            foundUser = new User(fileUsername, filePassword, fileName, fileAge, fileContact, fileAddress, fileRole);
                            break;
                        }
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        if (foundUser != null) {
            HttpSession session = request.getSession(true);
            session.setAttribute("user", foundUser);
            
            // RUBRIC: Two Types of Users
            if ("Staff".equalsIgnoreCase(foundUser.getRole())) {
                response.sendRedirect("EmployeeDashboard.jsp");
            } else {
                response.sendRedirect("home");
            }
            
        } else {
            request.setAttribute("errorMessage", "Invalid username or password.");
            request.getRequestDispatcher("/WEB-INF/login.jsp").forward(request, response);
        }
    }
}

=========================================
FILE: ./MP4_MovieTicketBooking/src/java/controllers/LogoutServlet.java
=========================================

package controllers;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class LogoutServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        // 1. Get the current session if it exists
        HttpSession session = request.getSession(false);
        
        // 2. If session exists, destroy it
        if (session != null) {
            session.invalidate();
        }
        
        // 3. Redirect to login page (or home if you prefer)
        response.sendRedirect("home");
    }
}

=========================================
FILE: ./MP4_MovieTicketBooking/src/java/controllers/ProfileServlet.java
=========================================

package controllers;

import java.io.*;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import objects.User;

public class ProfileServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        // CONVENTION FIX: Point to lowercase JSP file
        request.getRequestDispatcher("/WEB-INF/profile.jsp").forward(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        HttpSession session = request.getSession(false);
        User currentUser = (session != null) ? (User) session.getAttribute("user") : null;

        if (currentUser == null) {
            response.sendRedirect("login");
            return;
        }

        String targetUsername = currentUser.getUsername();
        String newPassword = request.getParameter("password");
        String newName = request.getParameter("name");
        String newAge = request.getParameter("age");
        String newContact = request.getParameter("contact");
        String newAddress = request.getParameter("address");

        String txtFilePath = getServletContext().getRealPath("/WEB-INF/users.txt");
        List<String> fileLines = new ArrayList<>();
        
        if (txtFilePath != null) {
            try (BufferedReader reader = new BufferedReader(new FileReader(txtFilePath))) {
                String line;
                while ((line = reader.readLine()) != null) {
                    String[] parts = line.split(",");
                    if (parts.length > 0 && parts[0].trim().equals(targetUsername)) {
                        String updatedLine = targetUsername + "," + newPassword + "," + newName + "," + 
                                             newAge + "," + newContact + "," + newAddress;
                        fileLines.add(updatedLine);
                        
                        // Update session object
                        currentUser.setPassword(newPassword);
                        currentUser.setName(newName);
                        currentUser.setAge(newAge);
                        currentUser.setContact(newContact);
                        currentUser.setAddress(newAddress);
                    } else {
                        fileLines.add(line);
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
            
            try (PrintWriter writer = new PrintWriter(new FileWriter(txtFilePath))) {
                for (String line : fileLines) {
                    writer.println(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        session.setAttribute("user", currentUser);
        response.sendRedirect("home");
    }
}

=========================================
FILE: ./MP4_MovieTicketBooking/src/java/controllers/SignupServlet.java
=========================================

package controllers;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class SignupServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        HttpSession session = request.getSession(false);
        if(session !=null && session.getAttribute("user")!=null){
            response.sendRedirect("home");
            return;
        }
        request.getRequestDispatcher("/WEB-INF/signup.jsp").forward(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String username = request.getParameter("username");
        String password = request.getParameter("password");
        String name = request.getParameter("name");
        String age = request.getParameter("age");
        String contact = request.getParameter("contact");
        String address = request.getParameter("address");
        
        // RUBRIC FIX: Default role is "Customer"
        String role = "Customer";

        // Write 7 items to the file
        String userRecord = username + "," + password + "," + name + "," + 
                            age + "," + contact + "," + address + "," + role;

        String txtFilePath = getServletContext().getRealPath("/WEB-INF/users.txt");
        if (txtFilePath != null) {
            try (FileWriter fw = new FileWriter(txtFilePath, true);
                 BufferedWriter bw = new BufferedWriter(fw);
                 PrintWriter out = new PrintWriter(bw)) {
                
                out.println(userRecord);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        response.sendRedirect("login");
    }
}

=========================================
FILE: ./MP4_MovieTicketBooking/src/java/listeners/ContextListener.java
=========================================

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package listeners;

import java.util.Date;
import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class ContextListener implements ServletContextListener {
    public Thread time;
    public volatile boolean running = true;
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        ServletContext context = sce.getServletContext();
        time = new Thread(() -> {
                while(running){
                    Date current=new Date();
                    context.setAttribute("date",current.toString());
                    try {
                        Thread.sleep(1000); // update every second
                    } catch (InterruptedException e) {
                        Thread.currentThread().interrupt();
                    }
                }
        });
        
        context.setAttribute("header","ICS2608 / 2CSC / BUENAFE, Anton - ILANO, Dwayne Anthony - PANGAN, Marc Stephen");
        context.setAttribute("footer","MP3");
}

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
    }
}


=========================================
FILE: ./MP4_MovieTicketBooking/src/java/objects/User.java
=========================================

package objects;

public class User {
   private String username;
    private String password;
    private String name;
    private String age;
    private String contact;
    private String address;
    private String role; // Added
    
    public User() {}

    // Updated Constructor to accept ALL fields
    public User(String username, String password, String name, String age, String contact, String address, String role) {
        this.username = username;
        this.password = password;
        this.name = name;
        this.age = age;
        this.contact = contact;
        this.address = address;
        this.role = role;
    }

    // --- Getters and Setters ---
    public String getUsername() { return username; }
    public void setUsername(String username) { this.username = username; }

    public String getPassword() { return password; }
    public void setPassword(String password) { this.password = password; }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public String getAge() { return age; }
    public void setAge(String age) { this.age = age; }

    public String getContact() { return contact; }
    public void setContact(String contact) { this.contact = contact; }

    public String getAddress() { return address; }
    public void setAddress(String address) { this.address = address; }
    
    public String getRole() { return role; }
    public void setRole(String role) { this.role = role; }
}

=========================================
FILE: ./MP4_MovieTicketBooking/web/400_error.jsp
=========================================

<%-- 
    Document   : 400_error.jsp
    Created on : Nov 18, 2025, 9:23:58 AM
    Author     : Anton
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Error 400: Bad Request</title>
    </head>
    <body>
      <h1>Error 400: Bad Request</h1>
      <p>Your browser sent a request that this server could not understand.</p>
    </body>
</html>


=========================================
FILE: ./MP4_MovieTicketBooking/web/403_error.jsp
=========================================

<%-- 
    Document   : 403_error.jsp
    Created on : Nov 18, 2025, 9:25:10 AM
    Author     : Anton
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Error 403: Forbidden</title>
    </head>
    <body>
        <h1>Error 403: Access Forbidden</h1>
        <p>You do not have permission to access this page.</p>
    </body>
</html>


=========================================
FILE: ./MP4_MovieTicketBooking/web/404_error.jsp
=========================================

<%-- 
    Document   : 404_error.jsp
    Created on : Nov 18, 2025, 9:25:35 AM
    Author     : Anton
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Error 404: Not Found</title>
    </head>
    <body>
        <h1>Error 404: Page Not Found</h1>
        <p>Sorry, the resource you are looking for does not exist :(</p>
    </body>
</html>


=========================================
FILE: ./MP4_MovieTicketBooking/web/500_error.jsp
=========================================

<%-- 
    Document   : 500_error.jsp
    Created on : Nov 18, 2025, 9:24:52 AM
    Author     : Anton
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Error 500: Server Error</title>
    </head>
    <body>
        <h1>Error 500: Internal Server Error</h1>
        <p>Something went wrong on our end. We are looking into it! :)</p>
    </body>
</html>


=========================================
FILE: ./MP4_MovieTicketBooking/web/css/home.css
=========================================

/* Updated color palette based on the "The Mouse" logo */
:root {
    --primary-blue: #234E70;      /* Dark blue from logo */
    --secondary-blue: #4A6E8A;    /* Lighter blue for accents */
    --cream: #EDE6D6;             /* Creamy background/text from logo */
    --gold: #FFD700;              /* Bright gold for stars/accents */
    --dark-grey: #333333;         /* Dark grey for text/elements */
    --light-grey: #A9A9A9;        /* Lighter grey for secondary text */
    --bg-dark: #121212;           /* Very dark background for depth */
    --card-bg: #282828;           /* Slightly lighter card background */
    --border-color: #383838;      /* Subtle border color */
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--bg-dark);
    color: var(--cream);
    line-height: 1.6;
    padding-top: 68px; /* Adjusted for fixed header */
}

a {
    color: var(--gold);
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* ===============================================
   *** HEADER ***
===============================================
*/
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 30px;
    background-color: var(--primary-blue);
    border-bottom: 1px solid var(--border-color);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 100;
}

.header-left .logo-img {
    height: 40px;
    width: auto;
    vertical-align: middle;
}

.header-right {
    display: flex;
    align-items: center;
}

.header-right .account-info {
    font-size: 16px;
    font-weight: 600;
    margin-right: 15px;
    color: var(--cream);
}

.header-right .login-btn {
    background-color: var(--gold);
    color: var(--primary-blue);
    padding: 8px 20px;
    border-radius: 5px;
    font-weight: 600;
    transition: background-color 0.3s ease;
}

.header-right .login-btn:hover {
    background-color: #e5c100;
    text-decoration: none;
}

.header-right .account-icon {
    font-size: 24px;
    color: var(--cream);
    cursor: pointer;
    margin-left: 15px;
}

/* ===============================================
   *** HERO SECTION ***
===============================================
*/
.hero-section {
    background-color: var(--bg-dark);
    text-align: center;
    padding: 80px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.hero-section .hero-logo-large {
    width: 250px;
    height: auto;
    margin-bottom: 30px;
}

.hero-section .hero-title {
    font-size: 60px;
    font-weight: 700;
    color: var(--cream);
    margin-bottom: 50px;
}

/* ===============================================
   *** MOVIE LISTINGS (GRID) ***
===============================================
*/
.movie-listings {
    /* Reduced side padding to 10px so cards go closer to the edge */
    padding: 40px 10px;
}

.listing-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding: 0 20px; /* Keep header text aligned nicely */
    flex-wrap: wrap;
}

.listing-tabs {
    display: flex;
    gap: 20px;
}

.listing-tabs button {
    background: none;
    border: none;
    color: var(--light-grey);
    font-size: 18px;
    font-weight: 600;
    cursor: pointer;
    padding: 5px 10px;
    position: relative;
}

.listing-tabs button.active {
    color: var(--cream);
}

.listing-tabs button.active::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: var(--gold);
}

.view-all {
    color: var(--gold);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 5px;
}

.view-all i {
    font-size: 14px;
}

/* --- THE GRID MAGIC --- */
.movie-grid {
    display: grid;
    
    /* 1. auto-fit: Stretches cards to fill the row (no empty space on right).
       2. minmax(350px, 1fr): Cards are at least 350px wide, but grow if needed.
    */
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    
    gap: 20px;
    width: 100%;
}

.movie-card {
    background-color: var(--card-bg);
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    transition: transform 0.2s ease;
}

.movie-card:hover {
    transform: translateY(-5px);
}

.movie-card img {
    width: 100%;
    /* Taller height for bigger cards */
    height: 525px;
    object-fit: cover;
    display: block;
}

.movie-info {
    padding: 15px;
}

.movie-info .title {
    font-size: 20px; /* Slightly larger text */
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--cream);
}

.movie-info .details {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 15px;
    color: var(--light-grey);
}

.movie-info .genre {
    color: var(--secondary-blue);
    font-weight: 500;
}

.movie-info .rating {
    display: flex;
    align-items: center;
    gap: 5px;
}

.movie-info .rating i {
    color: var(--gold);
}

/* ===============================================
   *** FOOTER & BUTTONS ***
===============================================
*/
.footer {
    background-color: var(--primary-blue);
    padding: 20px 30px;
    text-align: right;
    border-top: 1px solid var(--border-color);
}

.shopping-cart-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--gold);
    color: var(--primary-blue);
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 24px;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    cursor: pointer;
    transition: background-color 0.3s ease;
    z-index: 1000;
}
.shopping-cart-btn:hover {
    background-color: #e5c100;
}

/* ===============================================
   *** RESPONSIVE ***
===============================================
*/
@media (max-width: 768px) {
    body { padding-top: 57px; }

    .header { padding: 10px 15px; }
    .header-left .logo-img { height: 35px; }
    .header-right .login-btn { padding: 6px 15px; font-size: 14px; }
    
    .hero-section { padding: 60px 15px; }
    .hero-section .hero-title { font-size: 40px; }
    .hero-section .hero-logo-large { width: 200px; }
    
    .movie-listings { padding: 20px 15px; }
    .listing-header { flex-direction: column; align-items: flex-start; gap: 15px; }
    
    /* Make cards smaller on tablets so they fit side-by-side */
    .movie-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
    .movie-card img { height: 270px; }
    
    .shopping-cart-btn { width: 50px; height: 50px; font-size: 20px; }
}

@media (max-width: 480px) {
    .header-right .account-info { display: none; }
    .header-right .account-icon { margin-left: 0; }
    
    .hero-section .hero-title { font-size: 30px; }
    
    /* Single column on phones */
    .movie-grid { grid-template-columns: 1fr; }
}

=========================================
FILE: ./MP4_MovieTicketBooking/web/css/login.css
=========================================

/* Updated color palette based on the "The Mouse" logo */
:root {
    --primary-blue: #234E70;      /* Dark blue from logo */
    --secondary-blue: #4A6E8A;    /* Lighter blue for accents */
    --cream: #EDE6D6;             /* Creamy background/text from logo */
    --gold: #FFD700;              /* Bright gold for stars/accents */
    --dark-grey: #333333;         /* Dark grey for text/elements */
    --light-grey: #A9A9A9;        /* Lighter grey for secondary text */
    --bg-dark: #121212;           /* Very dark background for depth */
    --card-bg: #282828;           /* Slightly lighter card background */
    --border-color: #383838;      /* Subtle border color */
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Poppins', sans-serif;
    color: var(--cream);
    line-height: 1.6;
    
    /* Login-specific body styles */
    background-color: var(--primary-blue); /* Login page has blue background */
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

a {
    color: var(--gold); /* Links in gold */
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* ===============================================
   *** STYLES FOR LOGIN PAGE ***
===============================================
*/

.login-container {
    background-color: var(--bg-dark);
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    width: 100%;
    max-width: 450px;
}

.login-header {
    text-align: center;
    margin-bottom: 30px;
}

.logo-img-login {
    height: 60px; /* A bit larger for the login form */
    width: auto;
}

.login-form h2 {
    color: var(--cream);
    font-size: 28px;
    margin-bottom: 30px;
    text-align: center;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    color: var(--light-grey);
    margin-bottom: 8px;
    font-weight: 600;
}

.form-input {
    width: 100%;
    padding: 12px 15px;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    color: var(--cream);
    font-size: 16px;
}

.form-button {
    width: 100%;
    padding: 15px;
    background-color: var(--gold);
    color: var(--primary-blue);
    border: none;
    border-radius: 5px;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 10px;
}

.form-button:hover {
    background-color: #e5c100;
}

.signup-link {
    text-align: center;
    margin-top: 25px;
    color: var(--light-grey);
}

.signup-link a {
    font-weight: 600;
}

/* Responsive adjustments for login page */
@media (max-width: 480px) {
    .login-container {
        padding: 20px;
    }
    
    .login-form h2 {
        font-size: 24px;
    }
}

=========================================
FILE: ./MP4_MovieTicketBooking/web/css/profile.css
=========================================

/* Inherit main variables */
:root {
    --primary-blue: #234E70;      
    --secondary-blue: #4A6E8A;    
    --cream: #EDE6D6;             
    --gold: #FFD700;              
    --dark-grey: #333333;         
    --light-grey: #A9A9A9;        
    --bg-dark: #121212;           
    --card-bg: #282828;           
    --border-color: #383838;      
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: 'Poppins', sans-serif;
    background-color: var(--primary-blue);
    color: var(--cream);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.edit-container {
    background-color: var(--bg-dark);
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    width: 100%;
    max-width: 600px;
}

.edit-header {
    text-align: center;
    margin-bottom: 25px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 15px;
}

.logo-img { height: 50px; width: auto; margin-bottom: 10px; }

.form-group { margin-bottom: 15px; }

.form-row { display: flex; gap: 15px; }
.form-row .form-group { flex: 1; }
.form-row .small-field { flex: 0 0 100px; }

label {
    display: block;
    color: var(--light-grey);
    margin-bottom: 5px;
    font-size: 14px;
    font-weight: 600;
}

.form-input {
    width: 100%;
    padding: 10px;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    color: var(--cream);
    font-size: 16px;
}

/* Style for the read-only username */
.form-input.readonly {
    background-color: #1f1f1f;
    color: #666;
    cursor: not-allowed;
    border: 1px solid #333;
}

.button-group {
    display: flex;
    gap: 15px;
    margin-top: 25px;
}

.save-btn {
    flex: 2;
    padding: 12px;
    background-color: var(--gold);
    color: var(--primary-blue);
    border: none;
    border-radius: 5px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
}
.save-btn:hover { background-color: #e5c100; }

.cancel-btn {
    flex: 1;
    padding: 12px;
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--light-grey);
    text-align: center;
    border-radius: 5px;
    font-weight: 600;
    text-decoration: none;
}
.cancel-btn:hover { background-color: var(--card-bg); color: var(--cream); }

=========================================
FILE: ./MP4_MovieTicketBooking/web/css/signup.css
=========================================

/* Color Palette */
:root {
    --primary-blue: #234E70;      
    --secondary-blue: #4A6E8A;    
    --cream: #EDE6D6;             
    --gold: #FFD700;              
    --dark-grey: #333333;         
    --light-grey: #A9A9A9;        
    --bg-dark: #121212;           
    --card-bg: #282828;           
    --border-color: #383838;      
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Poppins', sans-serif;
    color: var(--cream);
    line-height: 1.6;
    background-color: var(--primary-blue);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px 0; /* Add padding so it doesn't touch edges on small screens */
}

a {
    color: var(--gold);
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* ===============================================
   *** SIGNUP CONTAINER ***
===============================================
*/

.login-container {
    background-color: var(--bg-dark);
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
    width: 100%;
    /* WIDER than login page to fit more fields */
    max-width: 550px; 
    margin: 20px;
}

.login-header {
    text-align: center;
    margin-bottom: 30px;
}

.logo-img-login {
    height: 60px;
    width: auto;
}

.login-form h2 {
    color: var(--cream);
    font-size: 28px;
    margin-bottom: 25px;
    text-align: center;
}

/* ===============================================
   *** FORM GROUPS & INPUTS ***
===============================================
*/

.form-group {
    margin-bottom: 15px;
}

/* Specific style for the side-by-side fields (Name & Age) */
.form-row {
    display: flex;
    gap: 15px;
}

/* Make the first item in the row grow to fill space */
.form-row .form-group {
    flex: 1;
}

.form-group label {
    display: block;
    color: var(--light-grey);
    margin-bottom: 5px;
    font-weight: 600;
    font-size: 14px;
}

.form-input {
    width: 100%;
    padding: 10px 15px;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    color: var(--cream);
    font-size: 16px;
}

/* Dropdown specific style */
select.form-input {
    appearance: none; /* Removes default arrow on some browsers */
    cursor: pointer;
}

.form-button {
    width: 100%;
    padding: 12px;
    background-color: var(--gold);
    color: var(--primary-blue);
    border: none;
    border-radius: 5px;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 15px;
}

.form-button:hover {
    background-color: #e5c100;
}

.signup-link {
    text-align: center;
    margin-top: 20px;
    color: var(--light-grey);
    font-size: 14px;
}

.signup-link a {
    font-weight: 600;
}

/* Responsive adjustments */
@media (max-width: 480px) {
    .login-container {
        padding: 20px;
    }
    
    /* Stack the name and age fields on very small screens */
    .form-row {
        flex-direction: column;
        gap: 0;
    }
}

=========================================
FILE: ./MP4_MovieTicketBooking/web/EmployeeDashboard.jsp
=========================================

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="objects.User"%>
<!DOCTYPE html>
<html>
<head>
    <title>Staff Dashboard</title>
    <link rel="stylesheet" type="text/css" href="css/home.css">
</head>
<body>
    <%@include file="footer.jsp" %>
    
    <div style="padding: 50px; text-align: center; color: white;">
        <h1>Staff Administration Panel</h1>
        
        <% 
            User user = (User) session.getAttribute("user");
            if(user != null) {
        %>
            <p>Welcome, Officer <%= user.getName() %></p>
            <p>Role: <span style="color: gold;"><%= user.getRole() %></span></p>
        <% } %>

        <br><br>
        <div style="border: 1px solid #444; padding: 20px; max-width: 400px; margin: 0 auto; background: #222;">
            <h3>Operations</h3>
            <ul style="list-style: none; padding: 0;">
                <li style="margin: 10px 0;">Manage Showings (Coming Soon)</li>
                <li style="margin: 10px 0;">Manage Tickets (Coming Soon)</li>
            </ul>
        </div>
        
        <br><br>
        <a href="logout" style="color: red; font-size: 20px;">Logout</a>
    </div>
</body>
</html>

=========================================
FILE: ./MP4_MovieTicketBooking/web/footer.jsp
=========================================

<%-- 
    Document   : footer
    Created on : Nov 18, 2025, 9:57:03 AM
    Author     : Anton
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Footer</title>
    </head>
    <body>
        <footer style="background-color: #f0f0f0; padding: 10px; border-top: 1px solid #ccc; text-align: center; margin-top: 20px;">

            <p><strong>MP4: The Mouse Cinema</strong></p>

            <%-- Scriptlet 1 (Expression) --%>
            <p>Current Time: <%= application.getAttribute("date") %></p>

            <%-- Scriptlet3 (Declaration) --%>
            <%! 
                public String getCopyrightYear() {
                    return "2025";
                }
            %>
            <p style="font-size: 11px; margin-top: 5px; color: #555;">
                &copy; <%= getCopyrightYear() %> The Mouse Cinema. All Rights Reserved.
            </p>

        </footer>
    </body>
</html>

=========================================
FILE: ./MP4_MovieTicketBooking/web/WEB-INF/home.jsp
=========================================

<%@ page import="objects.User, javax.servlet.http.HttpSession" %>
<%-- PREVENT BROWSER CACHING --%>
<%
    response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1
    response.setHeader("Pragma", "no-cache"); // HTTP 1.0
    response.setDateHeader("Expires", 0); // Proxies
%>
<!DOCTYPE html>
<html>
<head>
    <title>The Mouse - Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" type="text/css" href="css/home.css">
</head>
<body>

    <%-- 
      This Java code block checks the session, same as before.
      It runs on the server before the page is sent to the user.
    --%>
    <%
        HttpSession currentSession = request.getSession(false);
        User loggedInUser = null;
        String userName = "Guest"; // Default for guest
        if (currentSession != null && currentSession.getAttribute("user") != null) {
            loggedInUser = (User) currentSession.getAttribute("user");
            // Assuming your User object has a getName() method
            userName = loggedInUser.getName(); 
        }
    %>

    
    <header class="header">
        <div class="header-left">
            <%-- Logo image for the header --%>
            <a href="home">
                <img src="images/themouse.png" alt="The Mouse Logo" class="logo-img">
            </a>
            <div class="headstamp"><%= application.getAttribute("header") %> </div>
        </div>
        <div class="header-right">
            <% if (loggedInUser != null) { %>
                <span class="account-info">Welcome, <%= userName %></span>
                <a href="profile" class="account-icon" title="Edit Profile">
                    <i class="fas fa-user-circle"></i>
                </a>
        
                <a href="logout" class="account-icon" title="Sign Out" style="margin-left: 15px; color: #ff6b6b;">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            <% } else { %>
                <a href="login" class="login-btn">Login</a>
            <% } %>
</div>
    </header>

    
    <section class="hero-section">
        <%-- Larger logo image for the hero section --%>
        <img src="images/themouse.png" alt="The Mouse Logo" class="hero-logo-large">
        <h1 class="hero-title">Your Ultimate Movie Experience</h1> <%-- Changed hero title for a generic welcome --%>
    </section>

    
    <section class="movie-listings">
        <div class="listing-header">
            <div class="listing-tabs">
                <button class="active">Now Showing</button>
            </div>
            <a href="#" class="view-all">
                View All <i class="fas fa-chevron-right"></i>
            </a>
        </div>

        <div class="movie-grid">
            <a class='movieclick' href="avengers">
            <div class="movie-card">
                <img src="<%= request.getContextPath() %>/images/movie1.jpg" alt="Shadow Strike">
                <div class="movie-info">
                    <div class="title">Avengers: Endgame</div>
                    <div class="details">
                        <span class="genre">Action</span>
                        <span class="rating"><i class="fas fa-star"></i> 8.5</span>
                    </div>
                </div>
            </div>
            </a>
            
            <a class='movieclick' href="beautifulboy">
            <div class="movie-card">
                <img src="<%= request.getContextPath() %>/images/movie2.jpg" alt="Dark Secrets">
                <div class="movie-info">
                    <div class="title">Beautiful Boy</div>
                    <div class="details">
                        <span class="genre">Drama</span>
                        <span class="rating"><i class="fas fa-star"></i> 7.8</span>
                    </div>
                </div>
            </div>
            </a>
            
            <a class='movieclick' href="wicked">
            <div class="movie-card">
                <img src="<%= request.getContextPath() %>/images/movie3.jpg" alt="Beyond the Horizon">
                <div class="movie-info">
                    <div class="title">Wicked</div>
                    <div class="details">
                        <span class="genre">Fantasy</span>
                        <span class="rating"><i class="fas fa-star"></i> 8.2</span>
                    </div>
                </div>
            </div>
            </a>
            
            <a class='movieclick' href="lalaland">
            <div class="movie-card">
                <img src="<%= request.getContextPath() %>/images/movie4.jpg" alt="Cosmic Voyage">
                <div class="movie-info">
                    <div class="title">La La Land</div>
                    <div class="details">
                        <span class="genre">Drama</span>
                        <span class="rating"><i class="fas fa-star"></i> 9.1</span>
                    </div>
                </div>
            </div>
            </a>
        </div>
    </section>

    
    <footer class="footer">
        </footer>

    
    <button class="shopping-cart-btn">
        <i class="fas fa-shopping-cart"></i>
    </button>

</body>
</html>

=========================================
FILE: ./MP4_MovieTicketBooking/web/WEB-INF/login.jsp
=========================================

<%@ page import="objects.User, javax.servlet.http.HttpSession" %>
<%
    response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1
    response.setHeader("Pragma", "no-cache"); // HTTP 1.0
    response.setDateHeader("Expires", 0); // Proxies
%>
<!DOCTYPE html>
<html>
<head>
    <title>The Mouse - Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" type="text/css" href="css/login.css">
</head>
<body>

    <div class="login-container">
        <div class="login-header">
            <img src="images/themouse.png" alt="The Mouse Logo" class="logo-img-login">
        </div>
        <% 
            String error = (String) request.getAttribute("errorMessage");
            if (error != null) { 
        %>
        <div style="color: #ff4d4d; background: rgba(255,0,0,0.1); padding: 10px; border-radius: 5px; text-align: center; margin-bottom: 15px;">
            <%= error %>
        </div>
        <% } %>
        <form action="<%= request.getContextPath() %>/login" method="POST" class="login-form">
            <h2>Sign In</h2>

            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" name="username" class="form-input" required>
            </div>

            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" class="form-input" required>
            </div>

            <button type="submit" class="form-button" href="">Sign In</button>
        </form>

        <div class="signup-link">
            New to The Mouse? <a href="signup">Sign up now.</a>
        </div>
    </div>

</body>
</html>

=========================================
FILE: ./MP4_MovieTicketBooking/web/WEB-INF/profile.jsp
=========================================

<%@ page import="objects.User" %>
<%-- PREVENT BROWSER CACHING --%>
<%
    response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
    response.setHeader("Pragma", "no-cache");
    response.setDateHeader("Expires", 0);
%>
<!DOCTYPE html>
<html>
<head>
    <title>Edit Profile - The Mouse</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" type="text/css" href="<%= request.getContextPath() %>/css/profile.css">
</head>
<body>

    <%
        User user = (User) session.getAttribute("user");
        if (user == null) {
            response.sendRedirect("login");
            return;
        }
    %>

    <div class="edit-container">
        <div class="edit-header">
            <a href="home">
                <img src="<%= request.getContextPath() %>/images/themouse.png" alt="Logo" class="logo-img">
            </a>
            <h2>Edit Profile</h2>
        </div>

        <form action="profile" method="POST" class="edit-form">
            
            <div class="form-group">
                <label>Username (Cannot be changed)</label>
                <input type="text" name="username" value="<%= user.getUsername() %>" class="form-input readonly" readonly>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="text" name="password" value="<%= user.getPassword() %>" class="form-input" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" name="name" value="<%= user.getName() %>" class="form-input" required>
                </div>
                
                <div class="form-group small-field">
                    <label>Age</label>
                    <input type="number" name="age" value="<%= user.getAge() %>" class="form-input" required>
                </div>
            </div>

            <div class="form-group">
                <label>Contact Number</label>
                <input type="text" name="contact" value="<%= user.getContact() %>" class="form-input" required>
            </div>

            <div class="form-group">
                <label>Address</label>
                <input type="text" name="address" value="<%= user.getAddress() %>" class="form-input" required>
            </div>

            <div class="button-group">
                 <a href="home" class="cancel-btn">Cancel</a>
    
                 <button type="button" class="cancel-btn" onclick="window.location.href='logout'" style="color: #ff6b6b; border-color: #ff6b6b;">
                   Sign Out
                 </button>
    
                 <button type="submit" class="save-btn">Save Changes</button>
            </div>
        </form>
    </div>

</body>
</html>

=========================================
FILE: ./MP4_MovieTicketBooking/web/WEB-INF/signup.jsp
=========================================

<%@ page import="objects.User" %>
<%-- PREVENT BROWSER CACHING --%>
<%
    response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
    response.setHeader("Pragma", "no-cache");
    response.setDateHeader("Expires", 0);
%>
<!DOCTYPE html>
<html>
<head>
    <title>The Mouse - Sign Up</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" type="text/css" href="css/signup.css">
    
    <style>
        .login-container { max-width: 500px; margin: 40px auto; }
        .form-row { display: flex; gap: 15px; }
        .form-row .form-group { flex: 1; }
    </style>
</head>
<body>

    <div class="login-container">
        <div class="login-header">
            <img src="<%= request.getContextPath() %>/images/themouse.png" alt="The Mouse Logo" class="logo-img-login">
        </div>

        <form action="<%= request.getContextPath() %>/signup" method="POST" class="login-form">
            <h2>Create Account</h2>

            <div class="form-group">
                <label>Username</label>
                <input type="text" name="username" class="form-input" required>
            </div>
            
            <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" class="form-input" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" name="name" class="form-input" required>
                </div>
                <div class="form-group" style="flex: 0 0 100px;">
                    <label>Age</label>
                    <input type="number" name="age" class="form-input" required>
                </div>
            </div>

            <div class="form-group">
                <label>Contact Number</label>
                <input type="text" name="contact" class="form-input" required>
            </div>

            <div class="form-group">
                <label>Address</label>
                <input type="text" name="address" class="form-input" required>
            </div>

            <button type="submit" class="form-button">Sign Up</button>
        </form>

        <div class="signup-link">
            Already have an account? <a href="login">Log In here.</a>
        </div>
    </div>

</body>
</html>

=========================================
FILE: ./MP4_MovieTicketBooking/web/WEB-INF/users.txt
=========================================

admin,1234,Administrator,30,09123456789,Admin Headquarters,Staff

=========================================
FILE: ./MP4_MovieTicketBooking/web/WEB-INF/web.xml
=========================================

<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 
        xmlns="http://java.sun.com/xml/ns/javaee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    
    <display-name>Movie Ticket Booker</display-name>
    
    <listener>
        <description>ServletContextListener</description>
        <listener-class>listeners.ContextListener</listener-class>
    </listener>
    
    <servlet>
        <servlet-name>HomeServlet</servlet-name>
        <servlet-class>controllers.HomeServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>controllers.LoginServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>SignupServlet</servlet-name>
        <servlet-class>controllers.SignupServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ProfileServlet</servlet-name>
        <servlet-class>controllers.ProfileServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>controllers.LogoutServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>HomeServlet</servlet-name>
        <url-pattern>/home</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>SignupServlet</servlet-name>
        <url-pattern>/signup</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ProfileServlet</servlet-name>
        <url-pattern>/profile</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>home</welcome-file>
        <welcome-file>login</welcome-file>
    </welcome-file-list>
    
    <error-page>
        <error-code>400</error-code>
        <location>/400_error.jsp</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/404_error.jsp</location>
    </error-page>
    <error-page>
        <error-code>403</error-code>
        <location>/403_error.jsp</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/500_error.jsp</location>
    </error-page>
    
</web-app>